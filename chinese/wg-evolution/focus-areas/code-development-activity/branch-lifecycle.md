# 分支的生命周期

问题:  项目如何管理其版本控制分支的生命周期?

## 描述
该指标使得版本控制分支的生命周期可见。分支生命周期包括分支创建和删除的行为，以及版本控制分支的持久性。在编写代码时，开发团队可能会创建多个分支，专注于某些特定功能。随后，这些分支可能会合并到更持久的分支，例如代码仓的主分支。一些分支在代码仓的生命周期内持续存在，而其他分支在代码合并到更持久的分支后被删除。通过了解这些模式，我们可以学习分支的创建、删除和合并如何反映特定项目的开发实践。一个代码仓的典型分支生命周期和管理方法可用于帮助识别一个项目的代码仓管理风格。

## 目标
在其他项目特征的背景下，该指标的目标是提高代码仓分支创建和删除的数量和频率的可见性，以及版本控制分支的持久性。反过来，这将有助于潜在贡献者了解如何发起和持续参与项目。可以通过该指标解决的问题包括:
- 有多少分支被合并但没有被删除?
- 一个分支被合并后多久还没有被删除?
- 有多少分支存在的时间超过一定的天数、月数或年数?
- 项目或代码仓多久创建一次分支?
- 总的来说，分支通常存活多长时间?
- 在代码仓分支很少被删除的情况下，我们如何区分分支“死亡”（即不再打算再次使用；删除）或分支“休眠”（即长时间不活动，但可能会再次使用）？

## 实现
可以在 CONTRIBUTING.md 文档中看到有关项目分支生命周期管理的所述建议。这些文档可以使用语言分析在代码仓之间进行比较，并与从实际项目实践中获得的数据进行对比，以在代码仓内部和跨代码仓中得出见解。然而，在大多数情况下，我们在这个指标中关注的数据是定量结果。

**聚合器:**
- 创建的分支数。
- 删除的分支数。
- 合并的分支数。
- 放弃的分支数（有提交，但在删除之前从未合并）
- 分支总数。
- 分支的平均生命周期。
- 创建分支与删除分支的比率。


**参数：**
- 时间段. 从开始到结束日期的时间段。 默认：永久。
- 需要统计的代码变更所处的时期段。

### 筛选条件
- 代码仓集合
- 关于分支持久性的默认分支名称与描述性名称


### 数据收集策略

*具体描述：Git*

Git 分支数据存在于版本控制生态系统中的多个不同级别，通常同时存在于本地开发人员的电脑上以及托管平台（如 GitHub 或 BitBucket）上。托管平台上的这个分支数据也可能与每个开发者的电脑的数据不同，另外，不同的开发者在他们的电脑上可能有不同的分支数据，即使是同一个代码仓。

在 Git 特定情况下，由于 Git 设计为分布式版本控制系统，Git 允许单个存储库有多个远程仓（例如，用户在 github.com/user/project 上的 fork 克隆仓和 github.com/chaoss/project 上的上游仓），因此引入了大量额外的复杂性。通常情况下，许多个人贡献者可能在本地的同一个分支中工作，并将更改推送到远程仓中。因此，本地副本有时会与远程副本不同，远程副本可能在内部托管或在 GitHub、GitLab 和 BitBucket 等平台上托管。因为它们可能要么由不同的人管理（可能具有不同的分支风格），要么都被同一个人使用，以隔离区分不同的工作。

Git 分支的数据可以直接从 Git 日志中获取，也可以通过 Git 平台的 API 获取。

为分支数据选择一个“规范”版本的代码仓有用吗？这为比较具有不同版本的代码仓提供了一个有意义的基础。也可以使用

`git branch -a` 来列出所有存在的分支。


## 参考资料

采用 Git 分支策略: https://docs.microsoft.com/en-us/azure/devops/repos/git/git-branching-guidance?view=azure-devops

选择正确的 Git 分支策略: https://www.creativebloq.com/web-design/choose-right-git-branching-strategy-121518344      

分支策略对软件质量的影响 Emad Shihab, Christian Bird, 和 Thomas Zimmermann
https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/shihab-esem-2012.pdf

OpenStack:
https://docs.openstack.org/project-team-guide/other-branches.html