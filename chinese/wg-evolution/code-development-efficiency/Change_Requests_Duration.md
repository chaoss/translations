# 变更请求时长

问题：从代码变更请求开始到接受或关闭需要多长时间？


## 描述

变更请求如[变更请求](https://chaoss.community/metric-change-requests/)中定义。 接受的变更请求的定义位于[接受的变更请求](https://chaoss.community/metric-change-requests-accepted/)中。

变更请求时长是指从代码变更请求开始到结束（被接受并合并到代码库中）这段时间的长度。 这仅适用于接受的变更请求。

例如在 GitLab 中，当开发者上传提案的代码变更时，合并请求开始，同时打开合并请求。 当提交最终被接受并合并到代码库中时，即结束，同时关闭合并请求。

如果在代码合并后有评论或其他事件，不考虑将这些评论或其他事件用于衡量代码变更请求的时长。


## 目标

* 接受变更请求的时长。 接受的变更请求的代码审查时长指标能够表示项目在接受代码贡献前需要经过多长时间。 当然，该指标不是唯一用于跟踪编码活跃度的指标。


## 实现

**聚合器：**
* 中位数。 在考虑的时间段内，所有接受的变更请求的变更请求时长的中位数 (50%)。

**参数：**
* 时间段。 开始日期和完成日期。 默认：永久。  
  考虑接受的变更请求的时间段。 如果接受的变更请求的创建事件在该时间段内，则接受的变更请求在该时间段内。

* 源代码标准。 算法。 默认：所有文件均为源代码。  
  如果我们专注于源代码，则需要一个标准来确定一个文件是否为源代码的一部分。

### 筛选条件

* 按参与者（提交者、审阅者、合并者）。 需要参与者合并（合并同一作者的对应 ID）。
* 按参与者群组（雇主、性别…涉及每个参与者）。 需要参与者分组，并且可能需要参与者合并。


### 可视化效果

* 一段时间内的每月中位数
* 一段时间内的每组中位数

可以用条形图表示，X 轴为时间。 每个条形代表一定时间（如一个月）内更改代码的接受的变更请求。

* 一定时期的时长分布

这些可以表示为通常的统计分布曲线或条形图，在 X 轴用桶表示时长，在 Y 轴为变更请求的数量。


### 数据收集策略

**具体描述：GitHub**

对于 GitHub，考虑在代码库中接受并合并的拉取请求的时长。 对于单独的拉取请求，时长从打开时开始，直到其包含的提交被合并到代码库时结束。

强制性参数（对于 GitHub）：无。

**具体描述：GitLab**

对于 GitLab，考虑在代码库中接受并合并的合并请求的时长。 对于单独的合并请求，时长从打开时开始，直到其包含的提交被合并到代码库时结束。

强制性参数（对于 GitLab）：无。

**具体描述：Gerrit**

对于 Gerrit，考虑在代码库中接受并合并的代码变更请求的时长。 对于单独的代码变更请求，时长从打开时开始，直到其包含的提交被合并到代码库时结束。

强制性参数（对于 Gerrit）：无。

## 参考资料

