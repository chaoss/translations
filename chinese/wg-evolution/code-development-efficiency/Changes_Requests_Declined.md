# 拒绝的变更请求

问题：一段时间内，有哪些对代码变更的请求最终被拒绝变更？


## 描述

变更请求如[变更请求](https://chaoss.community/metric-change-requests/)中定义。 拒绝的变更请求是指没有合并到项目代码库而最终关闭的变更请求。

例如，在 GitHub 中，当一个 pull request 在没有合并的情况下被关闭，而其中引用的提交在 git 仓库中找不到时，其可以被认为遭到拒绝（但请参阅以下详细讨论）。 GitLab 的 merge request 同样适用。 对于 Gerrit，代码变更请求可以正式“放弃”，这也是该系统中检测拒绝的变更请求的方式。


## 目标

* 编码活跃度。 拒绝的代码变更请求是项目活动度的一个维度。 统计一个项目对应的仓库集合中被拒绝的代码变更请求，可以让您了解该项目中未导致实际变更的整体编码活动。 当然，该指标不是唯一用于跟踪编码活跃度的指标。



## 实现

**聚合器**：
* 计数。 一段时间内拒绝的变更请求的总数。
* 比率。 一段时间内拒绝的变更请求占变更请求总数的比率。

**参数：**
* 时间段。 考虑拒绝的变更请求的开始日期和结束日期。 默认：永久。
* 源代码标准。 算法。 默认：所有文件均为源代码。  
  如果我们专注于源代码，则需要一个标准来确定一个文件是否为源代码的一部分。


### 筛选条件

* 按参与者（提交者、审阅者、合并者）。 需要合并同一参与者对应的身份。
* 按参与者群组（雇主、性别…涉及每个参与者）。 需要参与者分组，并且可能需要参与者合并。


### 可视化效果

* 一段时间内每个周期的计数
* 一段时间内每个周期的比率

这些数据可以通过应用筛选条件进行分组（按参与者类型或按参与者群组)，并且可以表示为条形图，X 轴为时间。 每个条形代表一定时间（如一个月）内被拒绝的审查。


### 数据收集策略

**具体描述：GitHub**

在 GitHub 的情况下，拒绝的变更请求定义为“关闭的拉取请求，其变更未包含在 git 仓库中”，前提是它提出对源代码文件的变更。

请参阅[接受的变更请求](https://chaoss.community/metric-change-requests-accepted/)中关于 GitHub 具体描述的讨论，因其在此处也适用。

强制性参数（对于 GitHub）：

* 用于检测拒绝的拉取请求的启发式方法，区分那些拉取请求被关闭但变更被手动包含在 git 仓库中的情况。 默认：无。

**具体描述：GitLab**

在 GitLab 的情况下，拒绝的变更请求定义为“关闭的合并请求，其变更未包含在 git 仓库中”，前提是它提出对源代码文件的变更。

强制性参数（对于 GitLab）：

* 用于检测拒绝的合并请求的启发式方法，区分那些合并请求被关闭但变更被手动包含在 git 仓库中的情况。 默认：无。

**具体描述：Gerrit**

在 Gerrit 的情况下，拒绝的变更请求定义为“放弃的变更集”，前提是其提出对源代码文件的变更。

强制性参数（对于 Gerrit）：无。

## 参考资料

